# ì±„íŒ…ì•± ë§Œë“¤ê¸° Day 4 - í´ë¼ì´ì–¸íŠ¸ ë° ì„œë²„ êµ¬í˜„ - 3

ìƒì„±ì¼: 2025ë…„ 3ì›” 27ì¼ ì˜¤ì „ 9:02

ì‘ì„±ì¼: 25.03.26

## 1. êµ¬í˜„í•œ ê¸°ëŠ¥

- ì†Œì¼“ ëª¨ë“ˆ(socket.js)ì™€ ì±„íŒ…ì°½ ìš”ì†Œ ì¡°ì‘ ë¡œì§(client.js) ë¶„ë¦¬
- ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸ í™”ë©´ êµ¬í˜„
- ë¡œê·¸ì¸ í™”ë©´ êµ¬í˜„(ì‹œíë¦¬í‹° x)

## 2. ì½”ë“œ

1. í´ë¼ì´ì–¸íŠ¸
    - ì½”ë“œ ë¦¬ìŠ¤íŠ¸
        
        ### ì±„íŒ…ì°½
        
        1. client.html
            - ì½”ë“œ ë³´ê¸°
                
                ```jsx
                <!DOCTYPE html>
                <html lang="ko">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>ì±„íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜</title>
                    <link rel="stylesheet" href="client.css">
                    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                </head>
                <body>
                    <!-- ë‹‰ë„¤ì„ ì„¤ì • ëª¨ë‹¬ -->
                    <div id="nicknameModal" class="modal">
                        <div class="modal-content">
                            <h2>ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”</h2>
                            <input type="text" id="nicknameInput" placeholder="ë‹‰ë„¤ì„">
                            <button id="submitNickname" onclick="connectWebSocket()">í™•ì¸</button>
                        </div>
                    </div>
                    <div class="container">
                        <!-- ì‚¬ì´ë“œë°” - ì°¸ê°€ì ëª©ë¡ -->
                        <div class="sidebar">
                            <div class="user-profile">
                                <img src="default-avatar.png" alt="í”„ë¡œí•„" class="profile-img">
                                <span class="username" id="username">ì‚¬ìš©ì ì´ë¦„</span>
                            </div>
                            <h3>ì°¸ê°€ì ëª©ë¡</h3>
                            <ul class="participants-list" id="participantsList">
                                <!-- ì°¸ê°€ìë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            </ul>
                        </div>
                
                        <!-- ë©”ì¸ ì±„íŒ… ì˜ì—­ -->
                        <div class="main-content">
                            <!-- ì±„íŒ…ë°© ì •ë³´ -->
                            <div class="chat-header">
                                <h2>ì±„íŒ…ë°© ì´ë¦„</h2>
                                <div class="chat-info">
                                    <span class="participant-count">ì°¸ê°€ì: </span>
                                    <span class="participant-count" id="userNumber">0</span>
                                </div>
                            </div>
                
                            <!-- ì±„íŒ… ë©”ì‹œì§€ ì˜ì—­ -->
                            <div class="chat-messages" id="chatMessages">
                                <!-- ë©”ì‹œì§€ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            </div>
                
                            <!-- ë©”ì‹œì§€ ì…ë ¥ ì˜ì—­ -->
                            <div class="message-input-area">
                                <input type="text" id="messageInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
                                <button id="sendButton" onclick="sendMessage()">ì „ì†¡</button>
                                <button id="fileButton" class="file-button">ğŸ“</button>
                            </div>
                        </div>
                    </div>
                    <script src="socket.js"></script>
                    <script src="client.js"></script>
                </body>
                </html>
                ```
                
        2. client.css (ì´ì „ê³¼ ë™ì¼)
            - ì½”ë“œ ë³´ê¸°
                
                ```css
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                }
                
                body {
                    font-family: 'Noto Sans KR', sans-serif;
                    background-color: #f5f5f5;
                }
                
                .modal {
                    display: block;
                    position: fixed;
                    z-index: 1000;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0, 0, 0, 0.5);
                }
                
                .modal-content {
                    background-color: white;
                    margin: 15% auto;
                    padding: 20px;
                    border-radius: 5px;
                    width: 300px;
                    text-align: center;
                }
                
                .modal-content h2 {
                    margin-bottom: 20px;
                }
                
                .modal-content input {
                    width: 80%;
                    padding: 10px;
                    margin-bottom: 15px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                }
                
                .modal-content button {
                    padding: 10px 20px;
                    background-color: #4CAF50;
                    color: white;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                }
                
                .modal-content button:hover {
                    background-color: #45a049;
                }
                
                .container {
                    display: flex;
                    height: 100vh;
                    max-width: 1200px;
                    margin: 0 auto;
                    background-color: white;
                }
                
                /* ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ë§ */
                .sidebar {
                    width: 250px;
                    background-color: #2c3e50;
                    color: white;
                    padding: 20px;
                }
                
                .user-profile {
                    display: flex;
                    align-items: center;
                    margin-bottom: 20px;
                    padding-bottom: 20px;
                    border-bottom: 1px solid #34495e;
                }
                
                .profile-img {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    margin-right: 10px;
                }
                
                .participants-list {
                    list-style: none;
                }
                
                .participant {
                    background-color: white;
                    color: black;
                    padding: 5px 10px;
                    border-radius: 5px;
                }
                
                .participants-list li {
                    padding: 10px 0;
                    display: flex;
                    align-items: center;
                }
                
                /* ë©”ì¸ ì±„íŒ… ì˜ì—­ ìŠ¤íƒ€ì¼ë§ */
                .main-content {
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                }
                
                .chat-header {
                    padding: 20px;
                    background-color: #f8f9fa;
                    border-bottom: 1px solid #dee2e6;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }
                
                .chat-messages {
                    flex: 1;
                    padding: 20px;
                    overflow-y: auto;
                }
                
                .message {
                    margin-bottom: 15px;
                    padding: 10px;
                    border-radius: 10px;
                    max-width: 70%;
                }
                
                .message.received {
                    background-color: #f1f0f0;
                    text-align: left;
                }
                
                .message.sent {
                    background-color: #007bff;
                    color: white;
                    text-align: right;
                }
                
                .message-input-area {
                    padding: 20px;
                    border-top: 1px solid #dee2e6;
                    display: flex;
                    gap: 10px;
                }
                
                #messageInput {
                    flex: 1;
                    padding: 10px;
                    border: 1px solid #dee2e6;
                    border-radius: 5px;
                }
                
                button {
                    padding: 10px 20px;
                    border: none;
                    border-radius: 5px;
                    background-color: #007bff;
                    color: white;
                    cursor: pointer;
                }
                
                button:hover {
                    background-color: #0056b3;
                }
                
                .file-button {
                    padding: 10px 15px;
                    font-size: 20px;
                }
                ```
                
        3. client.js
            - ì½”ë“œ ë³´ê¸°
                
                ```jsx
                const USER = {
                    name: "user" + Math.random()
                }
                
                function onopen() {
                    console.log("WebSocket ì—°ê²° ì„±ê³µ");
                }
                
                function onmessage(event) {
                    const json = JSON.parse(event.data);
                
                    if (json.hasOwnProperty("userNumber") && json.hasOwnProperty("userNames")) {
                        document.getElementById("userNumber").textContent = json.userNumber;
                
                        const participantsList = document.getElementById("participantsList");
                        let users = "";
                        json.userNames.forEach(name => {
                            if (name == USER.name) {
                                users += "<li class='participant'> ë‚˜: " + name + "</li>";
                            } else {
                                users += "<li>" + name + "</li>";
                            }
                        });
                        participantsList.innerHTML = users;
                        return;
                    }
                
                    if (json.hasOwnProperty("name") && json.hasOwnProperty("message")) {
                        const chatMessages = document.getElementById("chatMessages");
                        let newMessage = "<div class='message received'>" + json.name + ": " + json.message + "</div>";
                        chatMessages.innerHTML += newMessage;
                        return;
                    }
                }
                
                SOCKET.connect(onopen, onmessage);
                
                function sendMessage() {
                    data = {};
                    data.message = document.getElementById("messageInput").value;  // ì…ë ¥ëœ ë©”ì‹œì§€ ê°€ì ¸ì˜¤ê¸°
                    SOCKET.socket.send(JSON.stringify(data));  // ë©”ì‹œì§€ ì „ì†¡
                    document.getElementById("messageInput").value = "";  // ì…ë ¥ì°½ ì´ˆê¸°í™”
                    
                    let selfMessage = "<div class='message sent'>" + 'ë‚˜: ' + data.message + "</div>";
                    let chatMessages = document.getElementById("chatMessages");
                    chatMessages.innerHTML += selfMessage;
                }
                
                function connectWebSocket() {
                    const modal = document.getElementById('nicknameModal');
                    const nicknameInput = document.getElementById('nicknameInput');
                
                    const nickname = nicknameInput.value.trim();
                    if (nickname) {
                        // ë‹‰ë„¤ì„ì„ ì €ì¥í•˜ê³  ëª¨ë‹¬ ë‹«ê¸°
                        USER.name = nickname;
                        document.getElementById('username').textContent = nickname;
                        modal.style.display = 'none';
                    } else {
                        alert('ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    }
                
                    SOCKET.socket.send(JSON.stringify(USER));
                }
                ```
                
                - SOCKETê³¼ ìš”ì†Œ ì¡°ì‘ ë¡œì§ ë¶„ë¦¬
        
        ### ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸
        
        1. roomlist.html
            - ì½”ë“œ ë³´ê¸°
                
                ```html
                <!DOCTYPE html>
                <html lang="ko">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>ì±„íŒ…ë°© ëª©ë¡</title>
                    <link rel="stylesheet" href="roomlist.css">
                    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                </head>
                <body>
                    <div class="container">
                        <!-- ì‚¬ì´ë“œë°” - ì‚¬ìš©ì í”„ë¡œí•„ -->
                        <div class="sidebar">
                            <div class="user-profile">
                                <img src="default-avatar.png" alt="í”„ë¡œí•„" class="profile-img">
                                <span class="username" id="username">ì‚¬ìš©ì ì´ë¦„</span>
                            </div>
                        </div>
                
                        <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
                        <div class="main-content">
                            <div class="rooms-header">
                                <h2>ì±„íŒ…ë°© ëª©ë¡</h2>
                                <button id="createRoomBtn">ìƒˆ ì±„íŒ…ë°© ë§Œë“¤ê¸°</button>
                            </div>
                
                            <!-- ì±„íŒ…ë°© ëª©ë¡ -->
                            <div class="room-list" id="roomList">
                            </div>
                        </div>
                    </div>
                
                    <!-- ìƒˆ ì±„íŒ…ë°© ìƒì„± ëª¨ë‹¬ -->
                    <div id="createRoomModal" class="modal">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <h2>ìƒˆ ì±„íŒ…ë°© ë§Œë“¤ê¸°</h2>
                            <div class="input-group">
                                <label for="roomNameInput">ì±„íŒ…ë°© ì´ë¦„</label>
                                <input type="text" id="roomNameInput" placeholder="ì±„íŒ…ë°© ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                            </div>
                            <div class="input-group">
                                <label for="portInput">í¬íŠ¸ ì£¼ì†Œ</label>
                                <input type="number" id="portInput" placeholder="í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" min="1024" max="65535">
                            </div>
                            <div class="modal-buttons">
                                <button id="submitRoom">ë§Œë“¤ê¸°</button>
                                <button id="cancelRoom">ì·¨ì†Œ</button>
                            </div>
                        </div>
                    </div>
                
                    <script src="roomlist.js"></script>
                </body>
                </html>
                ```
                
        2. roomlist.css
            - ì½”ë“œ ë³´ê¸°
                
                ```css
                .container {
                    display: flex;
                    height: 100vh;
                }
                
                .sidebar {
                    width: 250px;
                    background-color: #f5f5f5;
                    border-right: 1px solid #ddd;
                    padding: 20px;
                }
                
                .main-content {
                    flex: 1;
                    display: flex;
                    flex-direction: column;
                }
                
                .rooms-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 20px;
                    border-bottom: 1px solid #ddd;
                }
                
                .room-list {
                    flex: 1;
                    overflow-y: auto;
                    padding: 20px;
                }
                
                .room-item {
                    display: flex;
                    justify-content: space-between;
                    padding: 15px;
                    border-bottom: 1px solid #eee;
                    cursor: pointer;
                }
                
                .room-item:hover {
                    background-color: #f8f8f8;
                }
                
                .room-info h3 {
                    margin: 0 0 5px 0;
                }
                
                .last-message {
                    color: #666;
                    font-size: 0.9em;
                    margin: 0;
                }
                
                .room-meta {
                    text-align: right;
                    font-size: 0.8em;
                    color: #888;
                }
                
                #createRoomBtn {
                    padding: 8px 16px;
                    background-color: #007bff;
                    color: white;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                }
                
                /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
                .modal {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0, 0, 0, 0.5);
                }
                
                .modal-content {
                    background-color: #fff;
                    margin: 15% auto;
                    padding: 20px;
                    border-radius: 8px;
                    width: 400px;
                    position: relative;
                }
                
                .close {
                    position: absolute;
                    right: 20px;
                    top: 10px;
                    font-size: 24px;
                    cursor: pointer;
                }
                
                .input-group {
                    margin-bottom: 15px;
                }
                
                .input-group label {
                    display: block;
                    margin-bottom: 5px;
                }
                
                .input-group input {
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                }
                
                .modal-buttons {
                    display: flex;
                    justify-content: flex-end;
                    gap: 10px;
                    margin-top: 20px;
                }
                
                .modal-buttons button {
                    padding: 8px 16px;
                    border-radius: 4px;
                    cursor: pointer;
                }
                
                #submitRoom {
                    background-color: #4CAF50;
                    color: white;
                    border: none;
                }
                
                #cancelRoom {
                    background-color: #f44336;
                    color: white;
                    border: none;
                }
                ```
                
        3. roomlist.js
            - ì½”ë“œ ë³´ê¸°
                
                ```jsx
                // ëª¨ë‹¬ ê´€ë ¨ ìš”ì†Œë“¤
                const modal = document.getElementById('createRoomModal');
                const createRoomBtn = document.getElementById('createRoomBtn');
                const closeBtn = document.querySelector('.close');
                const submitBtn = document.getElementById('submitRoom');
                const cancelBtn = document.getElementById('cancelRoom');
                
                // ëª¨ë‹¬ ì—´ê¸°
                createRoomBtn.onclick = function() {
                    modal.style.display = "block";
                }
                
                // ëª¨ë‹¬ ë‹«ê¸° (X ë²„íŠ¼)
                closeBtn.onclick = function() {
                    modal.style.display = "none";
                }
                
                // ëª¨ë‹¬ ë‹«ê¸° (ì·¨ì†Œ ë²„íŠ¼)
                cancelBtn.onclick = function() {
                    modal.style.display = "none";
                }
                
                // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = "none";
                    }
                }
                
                // ì±„íŒ…ë°© ìƒì„± ì œì¶œ
                submitBtn.onclick = function() {
                    const roomName = document.getElementById('roomNameInput').value;
                    const portNumber = document.getElementById('portInput').value;
                    
                    if (!roomName || !portNumber) {
                        alert('ì±„íŒ…ë°© ì´ë¦„ê³¼ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                        return;
                    }
                    
                    if (portNumber < 1024 || portNumber > 65535) {
                        alert('ìœ íš¨í•œ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (1024-65535)');
                        return;
                    }
                
                    const roomInfo = {
                        name: roomName,
                        port: portNumber
                    }
                
                    // ì—¬ê¸°ì— ì±„íŒ…ë°© ìƒì„± ë¡œì§ ì¶”ê°€
                    console.log('ì±„íŒ…ë°© ìƒì„±:', {
                        name: roomName,
                        port: portNumber
                    });
                    
                    // ëª¨ë‹¬ ë‹«ê¸° ë° ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                    modal.style.display = "none";
                    document.getElementById('roomNameInput').value = '';
                    document.getElementById('portInput').value = '';
                
                    // ì±„íŒ…ë°© ëª©ë¡ ì—…ë°ì´íŠ¸
                    const roomList = document.getElementById('roomList');
                
                    let roomItem = ''
                    roomItem += '<div class="room-item">'
                    roomItem += '   <div class="room-info">'
                    roomItem += '       <h3>' + roomName + '</h3>'
                    roomItem += '       <p class="last-message">ë§ˆì§€ë§‰ ë©”ì‹œì§€...</p>'
                    roomItem += '   </div>'
                    roomItem += '   <div class="room-meta">'
                    roomItem += '       <span class="participant-count">5ëª…</span>'
                    roomItem += '       <span class="last-time">ì˜¤í›„ 2:30</span>'
                    roomItem += '   </div>'
                    roomItem += '</div>'
                    
                    roomList.innerHTML += roomItem;
                
                    SOCKET.connect();
                }
                ```
                
        
        ### ë¡œê·¸ì¸
        
        1. login.html
            - ì½”ë“œ ë³´ê¸°
                
                ```html
                <!DOCTYPE html>
                <html lang="ko">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>CK Talk</title>
                    <link rel="stylesheet" href="login.css">
                </head>
                <body>
                    <div class="login-container">
                        <div class="login-box">
                            <div class="app-header">
                                <img src="ckInfo2.png" alt="ì±„íŒ… ì•± ë¡œê³ " class="app-logo">
                                <h1 class="app-title">CK Talk</h1>
                            </div>
                            <form id="loginForm" class="login-form">
                                <div class="input-group">
                                    <label for="userId">ì•„ì´ë””</label>
                                    <input type="text" id="userId" name="userId" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                                </div>
                                <div class="input-group">
                                    <label for="userPassword">ë¹„ë°€ë²ˆí˜¸</label>
                                    <input type="password" id="userPassword" name="userPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                                </div>
                                <button type="submit" class="login-button">ë¡œê·¸ì¸</button>
                            </form>
                        </div>
                    </div>
                    <script src="login.js"></script>
                </body>
                </html>
                ```
                
        2. login.css
            - ì½”ë“œ ë³´ê¸°
                
                ```css
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                }
                
                body {
                    font-family: 'Arial', sans-serif;
                    background-color: #f5f5f5;
                    height: 100vh;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }
                
                .login-container {
                    width: 100%;
                    max-width: 400px;
                    padding: 20px;
                }
                
                .login-box {
                    background-color: white;
                    padding: 40px;
                    border-radius: 10px;
                    box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
                }
                
                /* ê¸°ì¡´ CSS ìœ ì§€ */
                
                .app-header {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 15px;
                    margin-bottom: 30px;
                }
                
                .app-logo {
                    width: 50px;  /* ë¡œê³  í¬ê¸°ëŠ” í•„ìš”ì— ë”°ë¼ ì¡°ì ˆí•˜ì„¸ìš” */
                    height: 50px;
                    object-fit: contain;
                }
                
                .app-title {
                    text-align: center;
                    color: #333;
                    font-size: 2.5em;
                    margin: 0; /* ê¸°ì¡´ margin-bottom ì œê±° */
                }
                
                .login-form {
                    display: flex;
                    flex-direction: column;
                    gap: 20px;
                }
                
                .input-group {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }
                
                .input-group label {
                    color: #555;
                    font-size: 0.9em;
                }
                
                .input-group input {
                    padding: 12px;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    font-size: 1em;
                    transition: border-color 0.3s ease;
                }
                
                .input-group input:focus {
                    outline: none;
                    border-color: #4CAF50;
                }
                
                .login-button {
                    background-color: #4CAF50;
                    color: white;
                    padding: 12px;
                    border: none;
                    border-radius: 5px;
                    font-size: 1em;
                    cursor: pointer;
                    transition: background-color 0.3s ease;
                }
                
                .login-button:hover {
                    background-color: #45a049;
                }
                
                .login-button:active {
                    transform: scale(0.98);
                }
                ```
                
        3. login.js
            - ì½”ë“œ ë³´ê¸°
                
                ```jsx
                document.getElementById('loginForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const userId = document.getElementById('userId').value;
                    const userPassword = document.getElementById('userPassword').value;
                    
                    // ì—¬ê¸°ì— ë¡œê·¸ì¸ ê²€ì¦ ë¡œì§ì„ ì¶”ê°€í•˜ì„¸ìš”
                    console.log('ë¡œê·¸ì¸ ì‹œë„:', {
                        userId: userId,
                        password: userPassword
                    });
                
                    // ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì±„íŒ…ë°© ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™
                    window.location.href = 'roomlist.html';
                });
                ```
                
        
        ### ì†Œì¼“
        
        1. socket.js
            - ì½”ë“œ ë³´ê¸°
                
                ```jsx
                const SOCKET = {
                    socket: null,
                    address: 'ws://localhost:12345',
                
                    connect: function(onopen, onmessage) {
                        SOCKET.socket = new WebSocket(this.address);  // ì„œë²„ ì£¼ì†Œì™€ í¬íŠ¸ ì„¤ì •
                        SOCKET.socket.onopen = onopen;
                        SOCKET.socket.onmessage = onmessage;
                    },
                }
                ```
                
2. ì„œë²„
    - ì½”ë“œ ë³´ê¸°
        1. ChatServer.java
            
            ```java
            package chat;
            
            import java.net.InetSocketAddress;
            import java.util.HashMap;
            import java.util.Map;
            
            import org.java_websocket.WebSocket;
            import org.java_websocket.handshake.ClientHandshake;
            import org.java_websocket.server.WebSocketServer;
            
            import com.fasterxml.jackson.core.JsonProcessingException;
            import com.fasterxml.jackson.databind.JsonMappingException;
            import com.fasterxml.jackson.databind.ObjectMapper;
            
            public class ChatServer extends WebSocketServer {
                
                private ChatService chatService;
            
                public ChatServer(String serverAddress, int port, ChatService chatService) {
                    super(new InetSocketAddress(serverAddress, port));
                    this.chatService = chatService;
                }
            
                @Override
                public void onOpen(WebSocket conn, ClientHandshake handshake) {
                	InetSocketAddress isa = (InetSocketAddress) conn.getRemoteSocketAddress();
                    System.out.println("ìƒˆ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°ë¨: " + isa.getAddress().getHostAddress() + ":" + isa.getPort());
                    Map<String, Object> map = new HashMap<>();
                    map.put("message", "ì„œë²„ì— ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!");
                    try {
            			sendToOne(conn, map);
            		} catch (JsonProcessingException e) {
            			e.printStackTrace();
            		}
                }
            
                @Override
                public void onClose(WebSocket conn, int code, String reason, boolean remote) {
                    System.out.println("í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì¢…ë£Œ: " + conn.getRemoteSocketAddress());
                    Map<String, Object> participation = chatService.removeUser(conn);
                    
                    try {
            			sendToAll(participation);
            		} catch (JsonProcessingException e) {
            			e.printStackTrace();
            		}
                }
            
                @Override
                public void onMessage(WebSocket conn, String data) {
                	
                    try {
                        Map<String, Object> dataMap = jsonToMap(data);
                        
                        if (dataMap.containsKey("name")) {
                        	Map<String, Object> participation = new HashMap<>();
                        	participation = chatService.newClient(dataMap, conn);
                            sendToAll(participation);
                            return;
                        }
                        
                        if (dataMap.containsKey("message")) {
            //                System.out.println("ë°›ì€ ë©”ì‹œì§€: " + dataMap.get("message"));
                            for (User user : chatService.getUsers()) {
                                // í˜„ì¬ í´ë¼ì´ì–¸íŠ¸ì—ê²ŒëŠ” ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ì§€ ì•ŠìŒ
                                if (user.getWebSocket() != conn) {
                                	dataMap.put("name", user.getName());
                                	sendToOne(user.getWebSocket(), dataMap);
                                }
                            }
                            return;
                        }
                        
                        if (dataMap.containsKey("room")) {
                        	// ë°©ì„ ê°œì„¤í•˜ëŠ” ë¡œì§
                        	User manager = new User("ì² ìˆ˜", "127.0.0.1", 7777);
                        	chatService.createRoom("ì‹¬ì‹¬í•´ì„œ ë§Œë“  ë°©", manager);
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                        conn.send("ì˜ëª»ëœ í˜•ì‹ì˜ ë©”ì‹œì§€ì…ë‹ˆë‹¤.");
                    }
                }
            
                @Override
                public void onError(WebSocket conn, Exception ex) {
                    ex.printStackTrace();
                }
            
                @Override
                public void onStart() {
                    System.out.println("ì„œë²„ ì‹œì‘ë¨...");
                    chatService.init();
                }
                
                // íŠ¹ì • ìœ ì €ì—ê²Œ ë©”ì‹œì§€ ì „ì†¡
                private void sendToOne(WebSocket conn, Map<String, Object> message) throws JsonProcessingException {
                	String jsonMessage = mapToJson(message);
                	conn.send(jsonMessage);
            	}
                
                // ëª¨ë“  ìœ ì €ì—ê²Œ ë©”ì‹œì§€ ì „ì†¡
                private void sendToAll(Map<String, Object> message) throws JsonProcessingException {
            		for (User user : chatService.getUsers()) {
            			String jsonMessage = mapToJson(message);
            			user.getWebSocket().send(jsonMessage);
            		}
            	}
                
                private Map<String, Object> jsonToMap(String json) throws JsonMappingException, JsonProcessingException {
            		ObjectMapper objectMapper = new ObjectMapper();
            		return objectMapper.readValue(json, Map.class);
            	}
                
                private String mapToJson(Map<String, Object> map) throws JsonProcessingException {
                	ObjectMapper objectMapper = new ObjectMapper();
                	return objectMapper.writeValueAsString(map);
            	}
            }
            
            ```
            
        
        1. User.java (ì´ì „ê³¼ ë™ì¼)
            
            ```java
            package chat;
            
            import org.java_websocket.WebSocket;
            
            public class User {
            	private String id;
            	private String password;
                private String name;
                private String ip;
                private int port;
                private WebSocket webSocket;
            
                public User(String name, String ip, int port) {
                    this.name = name;
                    this.ip = ip;
                    this.port = port;
                }
            
                // WebSocket ê°ì²´ë¥¼ ì¶”ê°€í•œ ìƒì„±ì
                public User(String name, String ip, int port, WebSocket webSocket) {
                    this.name = name;
                    this.ip = ip;
                    this.port = port;
                    this.webSocket = webSocket;
                }
            
                public String getName() {
                    return name;
                }
                
                public String getIp() {
                    return ip;
                }
                
                public int getPort() {
                    return port;
                }
            
                public WebSocket getWebSocket() {
                    return webSocket;
                }
            }
            
            ```
            
            - id, password ì¶”ê°€ ì˜ˆì • (ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„ ì‹œâ€¦)