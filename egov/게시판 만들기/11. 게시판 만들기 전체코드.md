# 게시판 만들기 전체 코드

생성일: 2025년 3월 18일 오후 2:38

## 1. API

- 코드 보기
    - controller
        
        ```java
        package egovframework.com.board.api.controller;
        
        import java.net.URI;
        import java.util.HashMap;
        import java.util.Map;
        
        import javax.annotation.Resource;
        import javax.servlet.http.HttpServletRequest;
        import javax.servlet.http.HttpServletResponse;
        
        import org.springframework.http.HttpHeaders;
        import org.springframework.http.ResponseEntity;
        import org.springframework.web.bind.annotation.PatchMapping;
        import org.springframework.web.bind.annotation.PathVariable;
        import org.springframework.web.bind.annotation.PostMapping;
        import org.springframework.web.bind.annotation.RequestBody;
        import org.springframework.web.bind.annotation.RequestMapping;
        import org.springframework.web.bind.annotation.RequestParam;
        import org.springframework.web.bind.annotation.RestController;
        import org.springframework.web.multipart.MultipartFile;
        
        import egovframework.com.board.api.service.BoardApiService;
        
        @RestController
        @RequestMapping("/api")
        public class BoardApiController {
        
        	@Resource(name = "BoardApiService")
        	private BoardApiService boardApiService;
        
        	// 게시글 작성
        	@PostMapping("/board")
        	public ResponseEntity<Map<String, Object>> sendPost(@RequestBody Map<String, Object> body) {
        		HttpHeaders headers = new HttpHeaders();
        		Map<String, Object> result = new HashMap<>();
        		Long res = boardApiService.savePost(body);
        		result.put("rspCode", "1");
        		return ResponseEntity.created(URI.create("/" + res)).headers(headers).body(result);
        	}
        
        	// 이미지 업로드
        	@PostMapping("/board/image")
        	public void imageUpload(HttpServletRequest req, HttpServletResponse res, @RequestParam MultipartFile upload) {
        
        	/*
        	 * OutputStream out = null; PrintWriter printWriter = null;
        	 * 
        	 * try { // 랜덤 문자 생성 UUID uid = UUID.randomUUID(); // 이름, 확장자, 바이트 가져오기 String
        	 * fileName = upload.getOriginalFilename(); String extension =
        	 * FilenameUtils.getExtension(fileName); byte[] bytes = upload.getBytes();
        	 * 
        	 * // 실제 이미지 저장 경로 String path = "C:/upload/" + File.separator; String
        	 * ckUploadPath = path + uid + "." + extension;
        	 * 
        	 * System.out.println("ckUploadPath :" + ckUploadPath);
        	 * 
        	 * File folder = new File(path); // 해당 디렉토리가 존재하는지 확인 if (!folder.exists()) {
        	 * try { folder.mkdirs(); // 폴더 생성 } catch (Exception e) { e.getStackTrace(); }
        	 * }
        	 * 
        	 * // 이미지 저장 out = new FileOutputStream(ckUploadPath); out.write(bytes);
        	 * out.flush(); // 초기화
        	 * 
        	 * // ckEditor 로 전송 printWriter = res.getWriter(); fileName = uid + "." +
        	 * extension; String fileUrl = "/upload/" + fileName;
        	 * 
        	 * System.out.println("fileUrl :" + fileUrl);
        	 * 
        	 * // json 으로 변환 JsonObject json = new JsonObject();
        	 * json.addProperty("uploaded", 1); json.addProperty("fileName", fileName);
        	 * json.addProperty("url", fileUrl); printWriter.println(json);
        	 * printWriter.flush(); // 초기화
        	 * 
        	 * System.out.println("json :" + json);
        	 * 
        	 * } catch (IOException e) { e.printStackTrace(); } finally { try { if (out !=
        	 * null) { out.close(); } if (printWriter != null) { printWriter.close(); } }
        	 * catch (IOException e) { e.printStackTrace(); } } }
        	 */
        	}
        
        	// 게시글 수정
        	@PatchMapping("/board/{id}")
        	public ResponseEntity<Map<String, Object>> updatePost(@PathVariable("id") Long id,
        			@RequestBody Map<String, Object> body) {
        		HttpHeaders headers = new HttpHeaders();
        		Map<String, Object> result = new HashMap<>();
        		body.put("id", id);
        		Long res = boardApiService.updatePost(body);
        		result.put("rspCode", "1");
        		result.put("id", res);
        		return ResponseEntity.ok().headers(headers).body(result);
        	}
        
        	// 더미 게시글 생성 (num: 생성하고자 하는 게시글 개수)
        	@PostMapping("/dummy")
        	public void saveDummyPosts(@RequestBody Map<String, Object> body) {
        		boardApiService.saveDummyPosts((int) body.get("num"));
        	}
        }
        
        ```
        
    - service (interface)
        
        ```java
        package egovframework.com.board.api.service;
        
        import java.util.Map;
        
        public interface BoardApiService {
        
        	public Long savePost(Map<String, Object> body);
        	
        	public Long updatePost(Map<String, Object> body);
        
        	public void saveDummyPosts(int num);
        }
        
        ```
        
    - service (impl)
        
        ```java
        package egovframework.com.board.api.service.impl;
        
        import java.sql.Date;
        import java.time.LocalDate;
        import java.util.HashMap;
        import java.util.Map;
        
        import javax.annotation.Resource;
        
        import org.egovframe.rte.fdl.cmmn.EgovAbstractServiceImpl;
        import org.springframework.stereotype.Service;
        
        import egovframework.com.board.api.mapper.BoardApiMapper;
        import egovframework.com.board.api.service.BoardApiService;
        
        @Service("BoardApiService")
        public class BoardApiServiceImpl extends EgovAbstractServiceImpl implements BoardApiService {
        	
        	@Resource(name = "BoardApiMapper")
        	private BoardApiMapper boardApiMapper;
        
        	// 게시글 저장
        	public Long savePost(Map<String, Object> body) {
        		body.put("created_at", Date.valueOf(LocalDate.now()));
        		body.put("updated_at", Date.valueOf(LocalDate.now()));
        		boardApiMapper.savePost(body);
        
        		return ((Number) body.get("id")).longValue();
        	}
        	
        	// 게시글 수정
        	public Long updatePost(Map<String, Object> body) {
        		body.put("updated_at", Date.valueOf(LocalDate.now()));
        		boardApiMapper.updatePost(body);
        
        		return ((Number) body.get("id")).longValue();
        	}
        
        	// 더미 게시글 저장
        	@Override
        	public void saveDummyPosts(int num) {
        		for (int i = 0; i < num; i++) {
        			Map<String, Object> post = new HashMap<>();
        			post.put("title", "title: dummy text");
        			post.put("writer", "이현준");
        			post.put("content", "content: dummy text");
        			post.put("created_at", Date.valueOf(LocalDate.now()));
        			post.put("updated_at", Date.valueOf(LocalDate.now()));
        			boardApiMapper.savePost(post);
        		}
        	}
        }
        
        ```
        
    - mapper (interface)
        
        ```java
        package egovframework.com.board.api.mapper;
        
        import java.util.Map;
        
        import org.egovframe.rte.psl.dataaccess.mapper.Mapper;
        
        @Mapper("BoardApiMapper")
        public interface BoardApiMapper {
        	
        	public Long savePost(Map<String, Object> body);
        	
        	public Long updatePost(Map<String, Object> body);
        } 
        ```
        
    - mapper (.xml)
        
        ```xml
        <?xml version="1.0" encoding="UTF-8" ?>
        <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
        	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
         
        <mapper namespace="egovframework.com.board.api.mapper.BoardApiMapper">
            <insert id="savePost" parameterType="map" useGeneratedKeys="true" keyProperty="id">
                INSERT INTO myboard
                (title, writer, content, created_at, updated_at)
                VALUE(
                	#{title},
                	#{writer},
                	#{content},
                	#{created_at},
                	#{updated_at}
                )
            </insert>
            
            <update id="updatePost" parameterType="map">
            	UPDATE myboard
        		SET title = #{title},
        			content = #{content},
        			updated_at = #{updated_at}
        		WHERE myboard.id = #{id};
            </update>
        </mapper>
        ```
        

## 2. Webview

- 코드 보기
    - controller
        
        ```java
        package egovframework.com.board.webview.controller;
        
        import java.util.HashMap;
        import java.util.Map;
        
        import javax.annotation.Resource;
        
        import org.springframework.stereotype.Controller;
        import org.springframework.ui.Model;
        import org.springframework.web.bind.annotation.GetMapping;
        import org.springframework.web.bind.annotation.PathVariable;
        import org.springframework.web.bind.annotation.RequestMapping;
        import org.springframework.web.bind.annotation.RequestParam;
        
        import egovframework.com.board.webview.service.BoardService;
        
        @Controller
        @RequestMapping("/webview")
        public class BoardController {
        	
        	@Resource(name = "BoardService")
        	private BoardService boardService;
        	
        	// 게시글 리스트 페이지
        	@GetMapping("/board.do")
        	public String getBoard(
        			@RequestParam(defaultValue = "1") int page,
        			Model model) {
        		Map<String, Object> params = new HashMap<>();
        		Long totalPosts = boardService.selectCountPosts();
        		params.put("page", page);
        		params.put("totalPosts", totalPosts);
        		model.addAttribute("currentPage", page);
        		model.addAttribute("posts", boardService.selectBoard(params));
        		model.addAttribute("totalPosts", totalPosts);
        		return "egovframework/com/board/board";
        	}
        	
        	// 게시글 페이지 이동
        //	@PostMapping("/board.json")
        //	@ResponseBody
        //	public ResponseEntity<Map<String, Object>> getBoardPaging(@RequestBody Map<String, Object> params, Model model) {
        //		if (params != null) {
        //			HttpHeaders headers = new HttpHeaders();
        //			Map<String, Object> result = new HashMap<>();
        //			result.put("posts", boardService.selectBoard(params));
        //			result.put("rspCode", "1");
        //			return ResponseEntity.ok().headers(headers).body(result);
        //		}
        //		return null;
        //	}
        	
        	// 게시글 작성 페이지
        	@GetMapping("/postWrite.do")
        	public String getPostWrite(Model model) {
        		return "egovframework/com/board/postWrite";
        	}
        	
        	// 게시글 상세 페이지
        	@GetMapping("/board.do/{id}")
        	public String getPostDetail(@PathVariable("id") Long id,
        			@RequestParam(required = false) Integer page,
        			Model model) {
        		Map<String, Object> res = boardService.selectPost(id);
        		if (res == null || res.isEmpty()) {
        			return "해당 id를 가진 글이 존재하지 않습니다.";
        		}
        		
        		if (page != null) {
        			model.addAttribute("page", page.intValue());
        		}
        		model.addAttribute("data", res);
        		return "egovframework/com/board/postDetail";
        	}
        	
        	// 게시글 수정 페이지
        	@GetMapping("/postWrite.do/{id}")
        	public String getPostUpdate(@PathVariable("id") Long id,
        			@RequestParam(required = false) Integer page,
        			Model model) {
        		if (page != null) {
        			model.addAttribute("page", page.intValue());
        		}
        		model.addAttribute("post", boardService.selectPost(id));
        		return "egovframework/com/board/postWrite";
        	}
        }
        
        ```
        
    - service (interface)
        
        ```java
        package egovframework.com.board.webview.service;
        
        import java.util.List;
        import java.util.Map;
        
        public interface BoardService {
        	
        	public List<Map<String, Object>> selectBoard(Map<String, Object> params);
        	
        	public Long selectCountPosts();
        
        	public Map<String, Object> selectPost(Long id);
        }
        ```
        
    - service (impl)
        
        ```java
        package egovframework.com.board.webview.service.impl;
        
        import java.util.Collections;
        import java.util.HashMap;
        import java.util.List;
        import java.util.Map;
        
        import javax.annotation.Resource;
        
        import org.egovframe.rte.fdl.cmmn.EgovAbstractServiceImpl;
        import org.springframework.stereotype.Service;
        
        import egovframework.com.board.webview.mapper.BoardMapper;
        import egovframework.com.board.webview.service.BoardService;
        
        @Service("BoardService")
        public class BoardServiceImpl extends EgovAbstractServiceImpl implements BoardService {
        	
        	@Resource(name = "BoardMapper")
        	private BoardMapper boardMapper;
        	
        	// 게시글 리스트 조회
        	public List<Map<String, Object>> selectBoard(Map<String, Object> params) {
        		
        		// 원하는 위치에서 게시글 가져오기
        		int page = (int) params.get("page");
        		Long totalPosts = (Long) params.get("totalPosts");
        		Long offset = totalPosts - (page * 10);
        		if (offset >= 0) {
        			params.put("offset", offset);
        			params.put("limit", Long.valueOf(10));
        		} else {
        			params.put("offset", Long.valueOf(0));
        			params.put("limit", 10 + offset);
        		}
        		List<Map<String, Object>> posts = boardMapper.selectBoard(params);
        
        		for (Map<String, Object> post : posts) {
        			post.put("created_at", post.get("created_at").toString());
        			post.put("updated_at", post.get("updated_at").toString());
        		}
        		
        		// 게시글을 최신순으로 가져오기 위해 역순으로 재배열
        		Collections.reverse(posts);
        		return posts;
        	}
        	
        	// 전체 게시글 개수 조회
        	@Override
        	public Long selectCountPosts() {
        		return boardMapper.selectCountPosts();
        	}
        
        	// 특정 id 게시글 조회
        	@Override
        	public Map<String, Object> selectPost(Long id) {
        		Map<String, Object> map = new HashMap<>();
        		map.put("id", id);
        		return boardMapper.selectPost(map);
        	}
        	
        }
        
        ```
        
    - mapper (interface)
        
        ```java
        package egovframework.com.board.webview.mapper;
        
        import java.util.List;
        import java.util.Map;
        
        import org.egovframe.rte.psl.dataaccess.mapper.Mapper;
        
        @Mapper("BoardMapper")
        public interface BoardMapper {
        
        	public List<Map<String, Object>> selectBoard(Map<String, Object> paramMap);
        	
        	public Long selectCountPosts();
        
        	public Map<String, Object> selectPost(Map<String, Object> paramMap);
        
        }
        ```
        
    - mapper (.xml)
        
        ```xml
        <?xml version="1.0" encoding="UTF-8" ?>
        <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
        	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
         
        <mapper namespace="egovframework.com.board.webview.mapper.BoardMapper">
        	<!-- 게시판(게시글 목록) 조회 -->
            <select id="selectBoard" parameterType="map" resultType="map">
                SELECT *
                FROM myboard
            </select>
            
            <!-- 전체 게시글 개수 조회 -->
            <select id="selectCountPosts" resultType="long">
            	SELECT COUNT(*) AS totalPosts
            	FROM myboard
            </select>
            
            <!-- 게시글 상세 내용 조회 -->
            <select id="selectPost" resultType="map">
                SELECT *
                FROM myboard
                WHERE myboard.id = #{id}
            </select>
        </mapper>
        ```
        

## 3. JSP

- 코드 보기
    - board.jsp
        
        ```html
        <%@ page language="java" contentType="text/html; charset=UTF-8"
        	pageEncoding="UTF-8"%>
        <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
        <!DOCTYPE html>
        <html>
        <head>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <meta charset="UTF-8">
        <title>게시판 만들기</title>
        <style>
        body {
        	height: 100vh;
        	display: flex;
        	flex-direction: column;
        	align-items: center;
        	margin: 0;
        }
        
        #content {
        	width: 100%;
        	height: 30%;
        	display: flex;
        	flex-direction: column;
        	align-items: center;
        	margin-bottom: 3%;
        }
        
        table {
        	width: 70%;
        }
        
        table, td, th {
        	border: 1px solid black;
        	border-collapse: collapse;
        	text-align: center;
        }
        
        table th:nth-child(1) {
        	width: 5%;
        }
        
        table th:nth-child(2) {
        	width: 50%;
        }
        
        table th:nth-child(3) {
        	width: 15%;
        }
        
        table th:nth-child(4) {
        	width: 15%;
        }
        
        #writeBtn {
        	width: 70%;
        	margin-bottom: 2%;
        	text-align: right;
        }
        
        #pageGroupBtn {
        	width: 70%;
        	height: 5%;
        	justify-content: center;
        	display: flex;
        	gap: 10%;
        	margin-bottom: 3%;
        }
        
        #pageGroupBtn button {
        	width: 10%;
        }
        
        .currentPage {
        	background-color: #4CAF50; /* 배경색 */
        	color: white; /* 글자색 */
        	border: none; /* 테두리 제거 */
        	text-align: center; /* 텍스트 중앙 정렬 */
        	font-size: 16px; /* 글자 크기 */
        	cursor: pointer; /* 마우스 커서 변경 */
        	border-radius: 5px; /* 둥근 테두리 */
        }
        </style>
        </head>
        <body>
        	<input type="hidden" id="currentPage" value="${currentPage}" />
        	<input type="hidden" id="totalPosts" value="${totalPosts}" />
        	<h1>게 시 판</h1>
        	<p>총 게시글 개수: ${totalPosts}개</p>
        	<div id="writeBtn">
        		<button>글쓰기</button>
        	</div>
        	<div id="content">
        		<table id="board">
        			<tr>
        				<th>번호</th>
        				<th>제목</th>
        				<th>작성자</th>
        				<th>작성일자</th>
        				<th>수정일자</th>
        			</tr>
        			<c:forEach items="${posts}" var="post">
        				<tr>
        					<td>${post.id}</td>
        					<td><a href="board.do/${post.id}?page=${currentPage}">${post.title}</a></td>
        					<td>${post.writer}</td>
        					<td>${post.created_at}</td>
        					<td>${post.updated_at}</td>
        				</tr>
        			</c:forEach>
        		</table>
        	</div>
        	<div id="pageGroupBtn">
        		<button type="button" id="first" data-page="">first</button>
        		<button type="button" id="prev" data-page="">prev</button>
        		<button type="button" id="next" data-page="">next</button>
        		<button type="button" id="last" data-page="">last</button>
        	</div>
        	<div id="pageNumberBtn"></div>
        	<script src="../js/egovframework/com/board/common.js"></script>
        	<script>
        	$(document).ready(function() {
        		calPaging($('#currentPage').val());
        	});
        
        	$('#writeBtn').click(function() {
        		window.location.href = 'postWrite.do';
        	});
        	
        	function calPaging(currentPage) {
        		const totalPosts = $('#totalPosts').val();
        		let pagesInGroup = 10;
        		let postsInPage = 10;
        		
        		// 페이지 그룹 이동버튼 계산
        		currentPageGroup = Math.floor((currentPage - 1) / pagesInGroup + 1);
        		let first = 1;
        		let prev = (currentPageGroup - 1) * pagesInGroup;
        		let next = (currentPageGroup + 1) * pagesInGroup - (pagesInGroup - 1);
        		let last = Math.floor((totalPosts - 1) / postsInPage + 1);
        		let totalPageGroups = Math.floor((last - 1) / pagesInGroup + 1);
        		
        		if (totalPageGroups > 1) {
        			if (currentPageGroup == 1) {
        				$('#next').attr('data-page', next);
        				$('#last').attr('data-page', last);
        				$('#next').prop('disabled', false);
        				$('#last').prop('disabled', false);
        				$("#first").prop("disabled", true);
        				$("#prev").prop("disabled", true);
        			} else if (currentPageGroup == totalPageGroups) {
        				$('#first').attr('data-page', first);
        				$('#prev').attr('data-page', prev);
        				$('#first').prop('disabled', false);
        				$('#prev').prop('disabled', false);
        				$('#next').prop('disabled', true);
        				$('#last').prop('disabled', true);
        			} else {
        				$('#first').attr('data-page', first);
        				$('#prev').attr('data-page', prev);
        				$('#next').attr('data-page', next);
        				$('#last').attr('data-page', last);
        				$('#first').prop('disabled', false);
        				$('#prev').prop('disabled', false);
        				$('#next').prop('disabled', false);
        				$('#last').prop('disabled', false);
        			}
        		} else {
        			$('#first').prop('disabled', true);
        			$('#prev').prop('disabled', true);
        			$('#next').prop('disabled', true);
        			$('#last').prop('disabled', true);
        		}
        
        		// 페이지 넘버 계산
        		let totalPages = (totalPosts - 1) / postsInPage + 1;
        		let startPage = currentPageGroup * pagesInGroup - (pagesInGroup - 1);
        		let endPage = currentPageGroup * pagesInGroup;
        		if (currentPageGroup == totalPageGroups) {
        			endPage = last;
        		}
        		
        		// 페이지숫자버튼 그리기
        		$('#pageNumberBtn').html("");
        		let button= '';
        		for (let i = startPage; i <= endPage; i++) {
        			if (i == currentPage) {
        				button += '<button class="currentPage" type="button" disabled="true">' + i + '</button>';
        				continue;
        			}
        			button += '<button type="button" data-page="' + i +'">' + i + '</button>';
        		}
        		$('#pageNumberBtn').append(button);
        		
        		addMovingPageLink(postsInPage);
        	}
        	
        	function addMovingPageLink(postsInPage) {
        		// 페이지 그룹 이동 링크 추가
        		$('#pageGroupBtn').children().off('click');
        		$('#pageGroupBtn').children().on('click', function() {
        			const page = $(this).attr('data-page');
        			window.location.href = '/webview/board.do?page=' + page;
        		});
        		
        		// 페이지 이동 링크 추가
        		$('#pageNumberBtn').children().on('click', function() {
        			const page = $(this).attr('data-page');
        			window.location.href = '/webview/board.do?page=' + page;
        		});
        	}
        	
        	function addPosts(res) {
        		// board라는 id를 가진 테이블의 첫 번째 자식(tr)을 제외한 나머지 요소 제거
        		$('#board tr:gt(0)').remove();
        		
        		const posts = res.posts;
        		let post = '';
        		for (let i = 0; i < posts.length; i++) {
        			post += '<tr>';
        			post += '	<td>' + common.nvl(posts[i].id) + '</td>';
        			post += '	<td><a href="board.do/' + common.nvl(posts[i].id) + '">' + common.nvl(posts[i].title) + '</a></td>';
        			post += '	<td>' + common.nvl(posts[i].writer) + '</td>';
        			post += '	<td>' + common.nvl(posts[i].created_at) + '</td>';
        			post += '	<td>' + common.nvl(posts[i].updated_at) + '</td>';
        			post += '</tr>';
        		}
        		$('#board').append(post);
        	}
        </script>
        </body>
        </html>
        ```
        
    - postDetail.jsp
        
        ```html
        <%@ page language="java" contentType="text/html; charset=UTF-8"
        	pageEncoding="UTF-8"%>
        <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
        <!DOCTYPE html>
        <html>
        <head>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <meta charset="UTF-8">
        <title>게시글 상세보기</title>
        <style>
        body {
        	display: flex;
        	flex-direction: column;
        	align-items: center;
        	margin: 0;
        }
        
        #editButton {
        	width: 70%;
        	display: flex;
        	justify-content: right;
        	margin-bottom: 2%;
        }
        
        #edit {
        	width: 5%;
        }
        
        table {
        	width: 70%;
        	height: 50vh;
        }
        
        th {
        	text-align: center;
        }
        
        table, td, th {
        	border: 1px solid black;
        	border-collapse: collapse;
        }
        
        .title {
        	color: red;
        }
        
        .title>:first-child {
        	width: 10%;
        	height: 10%;
        	color: blue;
        }
        
        .content {
        	heigth: 30%;
        }
        
        #boardBtn {
        	margin-top: 5%;
        }
        </style>
        </head>
        <body>
        	<input type="hidden" value="${page}" id="currentPage" />
        	<input type="hidden" value="${data.id}" id="postId" />
        	<h1>게 시 글 상 세 보 기</h1>
        	<div>
        		<p>아래는 게시글의 내용입니다.</p>
        	</div>
        	<div id="editButton">
        		<button type="button" id="edit">수정</button>
        	</div>
        	<table id="board">
        		<tr class="title">
        			<th>제목</th>
        			<th id="title"><h2>${data.title}</h2></th>
        		</tr>
        		<tr class="content">
        			<th>내용</th>
        			<td id="content">${data.content}</td>
        		</tr>
        	</table>
        	<button id="boardBtn">목록으로 돌아가기</button>
        	<script src="../../js/egovframework/com/board/common.js"></script>
        	<script>
        	$('#boardBtn').click(function() {
        		window.location.href = '/webview/board.do?page=' + $('#currentPage').val();
        	});
        	
        	$('#edit').click(function() {
        		window.location.href = '/webview/postWrite.do/' + $('#postId').val() + '?page=' + $('#currentPage').val();
        	});
        	</script>
        </body>
        </html>
        ```
        
    - postWrite
        
        ```html
        <%@ page language="java" contentType="text/html; charset=UTF-8"
        	pageEncoding="UTF-8"%>
        <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
        <!DOCTYPE html>
        <html>
        <head>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="/html/egovframework/com/cmm/utl/ckeditor/ckeditor.js"></script>
        <meta charset="UTF-8">
        <title>게시글 작성</title>
        <style>
        body {
        	display: flex;
        	flex-direction: column;
        	align-items: center;
        	margin: 0;
        }
        
        table {
        	width: 70%;
        }
        
        table, td, th {
        	border-collapse: collapse;
        	text-align: center;
        }
        
        #title {
        	width: 100%;
        }
        
        #postWriteBtn {
        	margin-top: 5%;
        }
        </style>
        </head>
        <body>
        	<input type="hidden" id="currentPage" value="${page}" />
        	<c:if test="${not empty post}">
        		<input type="hidden" value="${post.id}" id="postId" />
        	</c:if>
        	<c:if test="${empty post}">
        		<input type="hidden" value="-1" id="postId" />
        	</c:if>
        	<h1>게 시 글 작 성</h1>
        	<p>아래의 항목들을 작성하여 주시기 바랍니다.</p>
        
        	<table id="board">
        		<tr>
        			<td>제목</td>
        			<td><c:choose>
        					<c:when test="${not empty post}">
        						<input type="text" id="title" value="${post.title}" />
        					</c:when>
        					<c:otherwise>
        						<input type="text" id="title" />
        					</c:otherwise>
        				</c:choose></td>
        		</tr>
        		<tr>
        			<td>글 내용</td>
        			<td><c:choose>
        					<c:when test="${not empty post}">
        						<textarea id="content">${post.content}</textarea>
        					</c:when>
        					<c:otherwise>
        						<textarea id="content"></textarea>
        					</c:otherwise>
        				</c:choose></td>
        		</tr>
        	</table>
        	<div id="postWriteBtn">
        		<button id="write">등록</button>
        		<button id="cancel">취소</button>
        	</div>
        	<c:choose>
        		<c:when test="${not empty post}">
        			<script src="../../js/egovframework/com/board/common.js"></script>
        		</c:when>
        		<c:otherwise>
        			<script src="../js/egovframework/com/board/common.js"></script>
        		</c:otherwise>
        	</c:choose>
        	<script>
        	
        	// CKEditor 적용
        	$(function(){
        		CKEDITOR.replace('content', {
        			filebrowserUploadUrl: '/api/board/image',
        			filebrowserImageUploadUrl: '/api/board/image'
        		});
        	});
        	
        	$('#write').click(function() {
        		const data = {};
        		data.title = $('#title').val();
        		data.content = CKEDITOR.instances['content'].getData();
        		
        	    let isEmpty = false;
        
        	    if (data.title == "" || data.content == "") {
        	        isEmpty = true;
        	    }
        
        	    // 값이 비어있는 input이 있을 경우 알람창을 띄우고 버튼 동작 막기
        	    if (isEmpty) {
        	        alert("모든 필드를 채워주세요.");
        	        return;
        	    }
        		
        		// postId가 -1이면 새로 글쓰기 or -1이외의 값이면 기존 글 수정
        		if ($('#postId').val() == -1) {
        			common.sendAjax('post', '/api/board', data, (res, xhr) => {
        				console.log(res);
        				window.location.href = 'board.do' + xhr.getResponseHeader("Location") + '?page=' + $('#currentPage').val();
        			});
        		} else {
        			common.sendAjax('patch', '/api/board/' + $('#postId').val(), data, (res, xhr) => {
        				console.log(res);
        				window.location.href = '/webview/board.do/' + $('#postId').val() + '?page=' + $('#currentPage').val();
        			});
        		}
        	});
        	
        	$('#cancel').click(function() {
        		window.location.href = '/webview/board.do?page=' + $('#currentPage').val();
        	})
        	</script>
        </body>
        </html>
        ```
        

## 4. JavaScript

- 코드 보기
    - common.js
        
        ```jsx
        const common = {
        	sendAjax: function(type, url, data, callback) {
        		$.ajax({
        			type: type,
        			url: url,
        			dataType: 'json',
        			contentType: 'application/json',
        			data: JSON.stringify(data),
        			success: function(response, status, xhr) {
        				if (response.rspCode == 1) {
        					callback(response, xhr);
        				}
        			},
        			error: function(request, status, error) {
        				console.log(error);
        			}
        		})
        	},
        
        	nvl: function(data) {
        		if (data == null) {
        			return '-';
        		}
        		return data;
        	}
        }
        ```
        

## 5. 설정

- 코드 보기
    
    globals.properties
    
    ```yaml
    #-----------------------------------------------------------------------
    #
    #   globals.properties : 시스템
    #
    #-----------------------------------------------------------------------
    #   1.  key = value 구조입니다.
    #   2.  key값은 공백문자를 포함불가, value값은 공백문자를 가능
    #   3.  key값으로 한글을 사용불가,   value값은 한글사용이 가능
    #   4.  줄을 바꿀 필요가 있으면 '\'를 라인의 끝에 추가(만약  '\'문자를 사용해야 하는 경우는 '\\'를 사용)
    #   5.  Windows에서의 디렉토리 표시 : '\\' or '/'  ('\' 사용하면 안됨)
    #   6.  Unix에서의 디렉토리 표시 : '/'
    #   7.  주석문 처리는  #사용
    #   8.  value값 뒤에 스페이스가 존재하는 경우 서블릿에서 참조할때는 에러발생할 수 있으므로 trim()하거나 마지막 공백없이 properties 값을 설정할것
    #-----------------------------------------------------------------------
    
    # 운영서버 타입(WINDOWS, UNIX)
    Globals.OsType = UNIX
    
    # DB서버 타입(mysql, oracle, altibase, tibero, cubrid, maria, postgres, goldilocks) - datasource 및 sqlMap 파일 지정에 사용됨
    Globals.DbType = mysql
    
    # 권한 인증방식(dummy, session, security) - 사용자의 로그인시 인증 방식을 결정함
    # dummy : 더미 방식으로 사용자 권한을 인증함
    # session : 세션 방식으로 사용자 권한을 인증함
    # security : spring security 방식으로 사용자 권한을 인증함
    Globals.Auth = dummy
    
    # MainPage Setting
    Globals.MainPage  = /EgovContent.do
    
    # 위저드 사용시 데이터베이스 관련 설정을 불러옴
    
    # KISA 검증 (2019년 11월) - 중요정보 암호화
    # Globals.mysql.Password 는 com01 을 암호화한 것으로 https://www.egovframe.go.kr/wiki/doku.php?id=egovframework:rte2:fdl:crypto_simplify_v3_8 참조할 것
    # Globals.mysql.Password = com01 처럼 평문을 사용하려면 context-crypto.xml 에서 initial="false" crypto="false" 로 설정하고, 
    # context-datasource.xml 에서 <property name="password" value="${Globals.mysql.Password}"/> 로 바꾸어 주어야 함
    #mysql
    Globals.mysql.DriverClassName=net.sf.log4jdbc.DriverSpy
    Globals.mysql.Url=jdbc:log4jdbc:mysql://127.0.0.1:3305/board
    Globals.mysql.UserName = root
    Globals.mysql.Password = 0000
    
    #oracle
    Globals.oracle.DriverClassName=oracle.jdbc.driver.OracleDriver
    Globals.oracle.Url=jdbc:oracle:thin:@127.0.0.1:1521:xe
    Globals.oracle.UserName = com
    Globals.oracle.Password = xz4fmrSdr1vGGl6UtwPLwA%3D%3D
    
    #altibase
    Globals.altibase.DriverClassName=Altibase.jdbc.driver.AltibaseDriver
    Globals.altibase.Url=jdbc:Altibase://127.0.0.1:20300/mydb?encoding=UTF-8
    Globals.altibase.UserName = com
    Globals.altibase.Password = xz4fmrSdr1vGGl6UtwPLwA%3D%3D
    
    #tibero
    Globals.tibero.DriverClassName=com.tmax.tibero.jdbc.TbDriver
    Globals.tibero.Url=jdbc:tibero:thin:@127.0.0.1:8629:tibero
    Globals.tibero.UserName = com
    Globals.tibero.Password = xz4fmrSdr1vGGl6UtwPLwA%3D%3D
    
    #cubrid
    Globals.cubrid.DriverClassName=cubrid.jdbc.driver.CUBRIDDriver
    Globals.cubrid.Url=jdbc:cubrid:127.0.0.1:33000:com:::?charset=utf-8
    Globals.cubrid.UserName = com
    Globals.cubrid.Password = xz4fmrSdr1vGGl6UtwPLwA%3D%3D
    
    #MariaDB
    Globals.maria.DriverClassName=org.mariadb.jdbc.Driver
    Globals.maria.Url=jdbc:mariadb://127.0.0.1:3336/com
    Globals.maria.UserName = com
    Globals.maria.Password = xz4fmrSdr1vGGl6UtwPLwA%3D%3D
    
    #postgreSQL
    Globals.postgres.DriverClassName=org.postgresql.Driver
    Globals.postgres.Url=jdbc:postgresql://127.0.0.1:5432/com
    Globals.postgres.UserName=com
    Globals.postgres.Password=xz4fmrSdr1vGGl6UtwPLwA%3D%3D
    
    #GOLDILOCKS
    Globals.goldilocks.DriverClassName=sunje.goldilocks.jdbc.GoldilocksDriver
    Globals.goldilocks.Url=jdbc:goldilocks://127.0.0.1:22581/goldilocks
    Globals.goldilocks.UserName=com
    Globals.goldilocks.Password= xz4fmrSdr1vGGl6UtwPLwA%3D%3D
    
    # 로그인 인증 제한(login authentication limit)
    # (사용 여부 설정값 : true, false)
    Globals.login.Lock = false
    # -인증 제시도 횟수
    Globals.login.LockCount = 5
    
    #통합메인메뉴
    #Globals.MainPage = /sym/mnu/mpm/EgovMainMenuHome.do
    
    # G4C 연결용 IP (localhost)
    #Globals.LocalIp = 127.0.0.2
    
    # 환경파일 위치
    Globals.ShellFilePath     = globals.properties
    Globals.ServerConfPath    = conf/server.properties
    Globals.ClientConfPath    = conf/client.properties
    Globals.FileFormatPath    = conf/format.properties
    Globals.GPKIConfPath      = conf/gpki.properties
    Globals.ConfPath          = conf
    Globals.MailRequestPath   = mail/request/
    Globals.MailRResponsePath = mail/response/
    Globals.SMEConfigPath     = conf/SMEConfig.properties
    Globals.SmsDbConfPath     = conf/smsdb.properties
    
    # 환경파일 위치 (jeus)
    #Globals.ShellFilePath     = globals.properties
    #Globals.ServerConfPath    = conf/server.properties
    #Globals.ClientConfPath    = conf/client.properties
    #Globals.FileFormatPath    = conf/format.properties
    #Globals.GPKIConfPath      = conf/gpki.properties
    #Globals.ConfPath          = conf
    #Globals.fileStorePath     =
    #Globals.MailRequestPath   = mail/request/
    #Globals.MailRResponsePath = mail/response/
    #Globals.SMEConfigPath     = conf/SMEConfig.properties
    #Globals.SynchrnServerPath = tmp/upload/
    
    # WINDOWS용 쉘파일 정보
    SHELL.WINDOWS.getHostName      = prg/sh_001.bat
    SHELL.WINDOWS.getDrctryByOwner = prg/getDrctryByOwner.bat
    SHELL.WINDOWS.getDrctryOwner   = prg/getDrctryOwner.bat
    SHELL.WINDOWS.moveDrctry       = prg/moveDrctry.bat
    SHELL.WINDOWS.compileSchema    = prg/compileSchema.bat
    SHELL.WINDOWS.getDiskAttrb     = prg/getDiskAttrb.bat
    SHELL.WINDOWS.getDiskCpcty     = prg/getDiskCpcty.bat
    SHELL.WINDOWS.getDiskExst      = prg/getDiskExst.bat
    
    # UNIX용 쉘파일 정보 - 개발was jeus에서 사용할때 기준
    SHELL.UNIX.getHostName      = prg/sh_001.sh
    SHELL.UNIX.getDrctryByOwner = prg/getDrctryByOwner.sh
    SHELL.UNIX.getDrctryOwner   = prg/getDrctryOwner.sh
    SHELL.UNIX.getDrctryAccess  = prg/getDrctryAccess.sh
    SHELL.UNIX.getMountLc       = prg/getMountLc.sh
    SHELL.UNIX.getDiskName      = prg/getNetWorkInfo.sh
    SHELL.UNIX.moveDrctry       = prg/moveDrctry.sh
    SHELL.UNIX.compileSchema    = prg/compileSchema.sh
    SHELL.UNIX.getDiskAttrb     = prg/getDiskAttrb.sh
    SHELL.UNIX.getDiskCpcty     = prg/getDiskCpcty.sh
    SHELL.UNIX.getDiskExst      = prg/getDiskExst.sh
    SHELL.UNIX.getProcInfo      = prg/getProcInfo.sh
    
    # LINUX용 쉘파일 정보
    
    # 연계
    # 기관코드수신용(경로 설정은 반드시 절대경로를 사용해야함.)
    CNTC.INSTTCODE.DIR.rcv       = D:/tmp/test/rcv/
    CNTC.INSTTCODE.DIR.rcvold    = D:/tmp/test/rcvold/
    CNTC.INSTTCODE.DIR.bin       = D:/tmp/test/bin/
    
    CNTC.INSTTCODE.CMD.edircv    = gcc_edircv.bat
    CNTC.INSTTCODE.CMD.edircvmsg = gcc_edircvmsg.bat
    
    CNTC.INSTTCODE.INFO.userid   = USERID
    CNTC.INSTTCODE.INFO.userpw   = ******
    
    # 기관코드, 법정동코드 수신용 공공데이터포털 인증키(공공데이터포털에서 발급 받은 후 기입)
    Globals.data.serviceKey = 
    
    # 파일 업로드 경로(경로 설정은 반드시 절대경로를 사용해야함, 경로 뒤에 /를 붙여 주어야함.)
    Globals.fileStorePath =  C:/egovframework/upload/
    # 업로드 URL 경로 암호화 KEY
    #Globals.filePath.Encryption.key = 10자리이상,알파벳 및 숫자 및 특수기호 혼용하여 키를 지정한다. 
    # 파일 확장자 화이트리스트(허용목록) : 파일 확장자를 (.)과 함께 연이어서 사용하며 (.)로 시작한다.
    Globals.fileUpload.Extensions.Images = .gif.jpg.jpeg.png
    Globals.fileUpload.Extensions = .gif.jpg.jpeg.png.xls.xlsx
    Globals.fileUpload.maxSize = 1048576
    Globals.fileDownload.Extensions = .gif.jpg.jpeg.png
    
    # 파일 동기화 컴포넌트에서 사용할 파일 업로드 경로(경로 설정은 반드시 절대경로를 사용해야함, 경로 뒤에 /를 붙여 주어야함.)
    Globals.SynchrnServerPath = C:/egovframework/upload/Synch/
    
    # Social(Facebook, Oauth 컴포넌트 사용시 활용, 페이스북,트위터에서 발급 받은 후 기입))
    facebook.appId         = 
    facebook.appSecret     = 
    twitter.consumerKey    = 
    twitter.consumerSecret = 
    
    #LDAP조직도관리 컴포넌트 사용시 LDAP서버설정정보 필요
    ldap.url = ldap://localhost:10389
    ldap.rootDn = c=kr
    ldap.username = uid=admin,ou=system
    ldap.password = ******
    
    #약도관리 Kakao 개발자 appkey 발급 받아 등록해서 기입(카카오개발 Dev 앱관리 내에서 도메인 등록 필요)
    roughMap.appkey = 
    
    # 요소기술 - 환율계산 : 한국수출입은행 현재환율 API authKey(https://www.koreaexim.go.kr/ir/HPHKIR020M01?apino=2&viewtype=C&searchselect=&searchword= 발급 받은 후 기입)
    ehgtCalc.authKey = 
    
    # 비밀번호 유효기간 설정
    Globals.ExpirePwdDay = 180
    
    # 배치쉘파일 WhiteList 설정(","기호로 다중지정 가능) - 관련메뉴 : 1120.배치작업관리 / 1130.배치결과관리 / 1140.스케줄처리
    SHELL.WINDOWS.batchShellFiles	= 
    SHELL.UNIX.batchShellFiles		= 
    
    #배치쉘파일 접근 가능 폴더
    SHELL.batchShellFolder	= 
    ```
    
    context-datasource.xml
    
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans 
    	xmlns="http://www.springframework.org/schema/beans" 
    	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    	xmlns:util="http://www.springframework.org/schema/util" 
    	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd 
    	 						http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd">
    
    	<bean id="egov.propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="locations">
                <list>
                    <value>classpath:/egovframework/egovProps/globals.properties</value>
                    <!-- <value>file:/product/jeus/egovProps/globals.properties</value> -->
                </list>
            </property>
        </bean>
    	
    	<!-- DataSource -->
    	<alias name="dataSource" alias="egov.dataSource" />
    	
    	<!-- MySQL -->
    	<beans profile="mysql">  
    	<bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    		<property name="driverClassName" value="${Globals.mysql.DriverClassName}"/>
    		<property name="url" value="${Globals.mysql.Url}" />
    		<property name="username" value="${Globals.mysql.UserName}"/>
    		<!-- 암호화(Crypto) 관련 서비스 https://www.egovframe.go.kr/wiki/doku.php?id=egovframework:rte2:fdl:crypto_simplify_v3_8 참조 -->
    		<property name="password" value="${Globals.mysql.Password}"/>
    	</bean>
    	</beans>
    	
    	<!-- oracle -->
    <!-- 	<beans profile="oracle">
    	<bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    		<property name="driverClassName" value="${Globals.oracle.DriverClassName}"/>
    		<property name="url" value="${Globals.oracle.Url}" />
    		<property name="username" value="${Globals.oracle.UserName}"/>
    		<property name="password" value="#{egovEnvCryptoService.getPassword()}"/>
    	</bean>
    	</beans> -->
    
    	<!-- altibase -->
    <!-- 	<beans profile="altibase">
    	<bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    		<property name="driverClassName" value="${Globals.altibase.DriverClassName}"/>
    		<property name="url" value="${Globals.altibase.Url}" />
    		<property name="username" value="${Globals.altibase.UserName}"/>
    		<property name="password" value="#{egovEnvCryptoService.getPassword()}"/>
    		
    		<property name="validationQuery" value="select 1"/>
            <property name="testWhileIdle" value="true"/>
    	</bean>
    	</beans> -->
    
    	<!-- tibero -->
    <!-- 	<beans profile="tibero">
    	<bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    		<property name="driverClassName" value="${Globals.tibero.DriverClassName}"/>
    		<property name="url" value="${Globals.tibero.Url}" />
    		<property name="username" value="${Globals.tibero.UserName}"/>
    		<property name="password" value="#{egovEnvCryptoService.getPassword()}"/>
    	</bean>
    	</beans> -->
    
        <!-- cubrid -->
    <!--     <beans profile="cubrid">
        <bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
            <property name="driverClassName" value="${Globals.cubrid.DriverClassName}"/>
            <property name="url" value="${Globals.cubrid.Url}" />
            <property name="username" value="${Globals.cubrid.UserName}"/>
            <property name="password" value="#{egovEnvCryptoService.getPassword()}"/>
            
            <property name="validationQuery" value="select 1"/>
            <property name="testOnBorrow" value="false"/>
        </bean>
        </beans> -->
        <!--
        	CUBRID 가이드 참조
        	https://www.cubrid.com/tutorial/3794188
        	* DBCP를 통해 최초 connection 시 해당 connection이 유효한지 체크하는 isValid를 호출
         -->
    
    	<!-- MariaDB -->
    <!-- 	<beans profile="maria">
    	<bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    		<property name="driverClassName" value="${Globals.maria.DriverClassName}"/>
    		<property name="url" value="${Globals.maria.Url}" />
    		<property name="username" value="${Globals.maria.UserName}"/>
    		<property name="password" value="#{egovEnvCryptoService.getPassword()}"/>
    	</bean>
    	</beans> -->
    
    	<!-- PostresSQL -->
    <!-- 	<beans profile="postgres">  
    	<bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    		<property name="driverClassName" value="${Globals.postgres.DriverClassName}"/>
    		<property name="url" value="${Globals.postgres.Url}" />
    		<property name="username" value="${Globals.postgres.UserName}"/>
    		<property name="password" value="#{egovEnvCryptoService.getPassword()}"/>
    	</bean>
    	</beans> -->
    	
    	<!-- GOLDILOCKS -->
    <!-- 	<beans profile="goldilocks">  
    	<bean id="dataSource" class="org.apache.commons.dbcp2.BasicDataSource" destroy-method="close">
    		<property name="driverClassName" value="${Globals.goldilocks.DriverClassName}"/>
    		<property name="url" value="${Globals.goldilocks.Url}" />
    		<property name="username" value="${Globals.goldilocks.UserName}"/>
    		<property name="password" value="#{egovEnvCryptoService.getPassword()}"/>
    	</bean>
    	</beans> -->
    
        <!-- DB Pool이 생성이 되더라고 특정 시간 호출되지 않으면 DBMS 설정에 따라 연결을 끊어질 때
    		이 경우 DBCP를 사용하셨다면.. 다음과 같은 설정을 추가하시면 연결을 유지시켜 줍니다. -->
    	<!--
    	<property name="validationQuery" value="select 1 from dual" />
    	<property name="testWhileIdle" value="true" />
    	<property name="timeBetweenEvictionRunsMillis" value="60000" /> -->  <!-- 1분 -->
    
    	<!-- DBCP가 아닌 WAS의 DataSource를 사용하시는 경우도 WAS별로 동일한 설정을 하실 수 있습니다.
    		(WAS별 구체적인 설정은 WAS document 확인) -->
    </beans>
    
    ```
    
    context-mapper.xml
    
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd">
    	
        <!-- 실행환경에서 빈이름 참조(EgovAbstractDAO) -->
    	<bean id="egov.lobHandler" class="org.springframework.jdbc.support.lob.DefaultLobHandler" lazy-init="true" />
    
    	<!-- Mybatis setup for Mybatis Database Layer -->
    	<bean id="egov.sqlSession" class="org.mybatis.spring.SqlSessionFactoryBean">		
    		<property name="dataSource" ref="egov.dataSource"/>
    		<property name="configLocation" value="classpath:/egovframework/mapper/config/mapper-config.xml" />
    		
    		<property name="mapperLocations">
    			<list>
    				<value>classpath:/egovframework/mapper/com/**/*_${Globals.DbType}.xml</value>
    				<value>classpath:/board/mapper/*.xml</value>
    			</list>
    		</property>
    	</bean>
    
    	<!-- Mybatis Session Template -->
    	<bean id="egov.sqlSessionTemplate" class="org.mybatis.spring.SqlSessionTemplate">
    		<constructor-arg ref="egov.sqlSession"/>
    	</bean>
    	
    	<bean class="org.egovframe.rte.psl.dataaccess.mapper.MapperConfigurer">
    		<property name="basePackage" value="egovframework.com.board.**.mapper" />
    		<property name="sqlSessionFactoryBeanName" value="egov.sqlSession" />
    	</bean>
    
    </beans>
    ```
    
    egov-com-servlet.xml
    
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:mvc="http://www.springframework.org/schema/mvc"
        xmlns:p="http://www.springframework.org/schema/p"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
            http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd">
    
    	<context:component-scan base-package="egovframework">
    		<context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
    		<context:exclude-filter type="annotation" expression="org.springframework.stereotype.Service"/>
    		<context:exclude-filter type="annotation" expression="org.springframework.stereotype.Repository"/>
    	</context:component-scan>
    	
    	<mvc:resources mapping="/upload/**" location="file:///C:/upload/"/>
    	
    	<!-- For Pagination Tag -->
    	<bean id="imageRenderer" class="egovframework.com.cmm.ImagePaginationRenderer"/>
    	
    	<!-- 사진 업로드 -->
    	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    		<property name="defaultEncoding" value="UTF-8" />
    	</bean>
    
    	<bean id="paginationManager" class="org.egovframe.rte.ptl.mvc.tags.ui.pagination.DefaultPaginationManager">
    		<property name="rendererType">
    			<map>
    				<entry key="image" value-ref="imageRenderer"/>
    			</map>
    		</property>
    	</bean>
    
        <bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
            <property name="webBindingInitializer">
                <bean class="egovframework.com.cmm.web.EgovBindingInitializer"/>
            </property>
            <property name="messageConverters">
    			<list>
    				<bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
        				<property name="defaultCharset" value="UTF-8"/>
    				</bean>
    			</list>
    		</property>
    		<property name="customArgumentResolvers">
    			<list>
    				<bean class="egovframework.com.cmm.resolver.EgovSecurityArgumentResolver" />
    			</list>
    		</property>
        </bean>
        
        <!-- setting Locale Locale Interceptor 설정하기  -->
        <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"
            p:paramName="lang" />
    
        <bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver" />
    
        <bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
            <property name="interceptors">
                <list>
                    <ref bean="localeChangeInterceptor"/>
                </list>
            </property>
        </bean>
        
        <!-- IP 정보 기록 및 로그인 체크가 필요한 URL과 로그인 여부를 체크해줄 인터셉터를 등록한다. -->
        <!-- 분리 -->
        
    	<bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
    		<property name="defaultErrorView" value="egovframework/com/cmm/error/egovError"/>
    		<property name="exceptionMappings">
    			<props>
    				<prop key="org.springframework.dao.DataAccessException">egovframework/com/cmm/error/dataAccessFailure</prop>
    				<prop key="org.springframework.transaction.TransactionException">egovframework/com/cmm/error/dataAccessFailure</prop>
    				<prop key="org.egovframe.rte.fdl.cmmn.exception.EgovBizException">egovframework/com/cmm/error/egovBizException</prop>
    				<prop key="org.springframework.web.HttpSessionRequiredException">egovframework/com/uat/uia/EgovLoginUsr</prop>
    				<prop key="egovframework.com.cmm.exception.EgovXssException">egovframework/com/cmm/error/egovXssException</prop>
    				<prop key="egovframework.com.cmm.exception.EgovFileExtensionException">egovframework/com/cmm/error/egovFileExtensionException</prop>
    			</props>
    		</property>
    	</bean>
    
    	<!-- for JFile -->
    	<bean class="org.springframework.web.servlet.view.BeanNameViewResolver" p:order="0"/>
    
    	<bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" p:order="1"
    		  p:viewClass="org.springframework.web.servlet.view.JstlView"
    		  p:prefix="/WEB-INF/jsp/" p:suffix=".jsp"/>
    		  
    	<bean id="jsonView" class="org.springframework.web.servlet.view.json.MappingJackson2JsonView">
    		<property name="contentType" value="application/json;charset=UTF-8"/>
    	</bean>
    	
    	<!-- Facebook 설정 -->
    	<mvc:default-servlet-handler />
    	
    	<mvc:view-controller path="/uss/ion/fbk/facebookSignin.do" view-name="egovframework/com/uss/ion/fbk/EgovFacebookSignin" />
    
    </beans>
    
    ```